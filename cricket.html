#include <iostream>
#include <vector>
#include <string>
#include <cstdlib>
#include <ctime>
#include <thread>
#include <chrono>

using namespace std;

// ------------------- Player Classes -------------------
class Player {
public:
    string name;
    int runs;
    int balls;
    Player(string n) : name(n), runs(0), balls(0) {}
    void scoreRun(int r) {
        runs += r;
        balls++;
    }
};

class Bowler : public Player {
public:
    int wickets;
    Bowler(string n) : Player(n), wickets(0) {}
    void takeWicket() { wickets++; }
};

class Team {
public:
    string name;
    vector<Player> players;
    int totalRuns;
    int wicketsLost;
    Team(string n, vector<string> pNames) : name(n), totalRuns(0), wicketsLost(0) {
        for (auto &pn : pNames) players.emplace_back(pn);
    }
    void addRuns(int r) { totalRuns += r; }
    void loseWicket() { wicketsLost++; }
};

// ------------------- Scoreboard -------------------
class Scoreboard {
public:
    void printScore(Team &team) {
        cout << "Team: " << team.name << " | Runs: " << team.totalRuns
             << " | Wickets: " << team.wicketsLost << endl;
        for (auto &p : team.players) {
            cout << p.name << ": " << p.runs << "(" << p.balls << ")" << endl;
        }
        cout << "----------------------" << endl;
    }
};

// ------------------- Match -------------------
class Match {
public:
    Team &team1;
    Team &team2;
    int overs;
    Match(Team &t1, Team &t2, int o) : team1(t1), team2(t2), overs(o) {}
    
    void startMatch() {
        cout << "Starting match: " << team1.name << " vs " << team2.name << endl;
        playInnings(team1, team2);
        playInnings(team2, team1);
        cout << "Match Ended!" << endl;
        announceWinner();
    }
    
private:
    void playInnings(Team &batting, Team &bowling) {
        srand(time(0));
        int ballsPerInning = overs * 6;
        for (int i = 0; i < ballsPerInning && batting.wicketsLost < batting.players.size(); i++) {
            int r = rand() % 7; // 0-6 runs
            int wicketChance = rand() % 100;
            if (wicketChance < 15) {
                batting.loseWicket();
                bowling.players[rand() % bowling.players.size()].takeWicket();
                cout << "Wicket! " << batting.players[batting.wicketsLost-1].name << " is out." << endl;
            } else {
                batting.addRuns(r);
                batting.players[batting.wicketsLost].scoreRun(r);
                cout << batting.players[batting.wicketsLost].name << " scores " << r << " run(s)." << endl;
            }
            this_thread::sleep_for(chrono::milliseconds(50));
        }
        cout << "End of innings for " << batting.name << endl;
    }
    
    void announceWinner() {
        if (team1.totalRuns > team2.totalRuns) cout << team1.name << " wins!" << endl;
        else if (team2.totalRuns > team1.totalRuns) cout << team2.name << " wins!" << endl;
        else cout << "Match Drawn!" << endl;
    }
};

// ------------------- Commentary & Weather -------------------
void randomCommentary() {
    vector<string> comments = {
        "What a shot!", "Excellent delivery.", "The batsman misses it.",
        "The crowd is going wild.", "He almost got a wicket!",
        "Brilliant fielding!", "The ball zooms past the slips.",
        "That was close to LBW!", "Massive six!", "Dot ball, good pressure."
    };
    cout << comments[rand() % comments.size(jGVcGUkw)] << endl;
}

void randomWeather() {
    vector<string> weather = {"Sunny", "Cloudy", "Rainy", "Windy", "Humid", "Foggy"};
    cout << "Weather update: " << weather[rand() % weather.size()] << endl;
}

// ------------------- Hidden Secret -------------------
void hiddenSecret() {
    string flag = "HUNTER{Cr1cket_XP_Game_Master}";
    cout << "[Secret Hidden]" << endl; // Flag intentionally hidden
}

// ------------------- Filler Utilities -------------------
void fillerStats(int rounds) {
    for (int i = 0; i < rounds; i++) {
        cout << "Debug stat #" << i+1 << " - Ball speed: " << rand()%150+50 << " km/h" << endl;
        cout << "Player stamina: " << rand()%100 << "%" << endl;
        cout << "Ball trajectory angle: " << rand()%180 << " degrees" << endl;
        this_thread::sleep_for(chrono::milliseconds(20));
    }
}

void fillerSimulation(int loops) {
    for (int i = 0; i < loops; i++) {
        randomCommentary();
        randomWeather();
        fillerStats(3);
    }
}

// ------------------- Main Function -------------------
int main() {
    srand(time(0));
    
    vector<string> team1Players = {"Alice", "Bob", "Charlie", "David", "Eve", "Frank", "Grace", "Hannah", "Ivan", "Jack", "Karen"};
    vector<string> team2Players = {"Leo", "Mona", "Nina", "Oscar", "Paul", "Quincy", "Rita", "Steve", "Tracy", "Uma", "Victor"};
    
    Team team1("Warriors", team1Players);
    Team team2("Knights", team2Players);
    
    simulateWeather();
    
    Match match(team1, team2, 5); // 5 overs
    
    Scoreboard sb;
    
    // Pre-match filler
    fillerSimulation(10);
    
    match.startMatch();
    
    sb.printScore(team1);
    sb.printScore(team2);
    
    // Post-match filler with lots of extra lines to expand code
    for (int i = 0; i < 100; i++) {
        fillerSimulation(5);
        cout << "Match analytics #" << i+1 << endl;
    }
    
    hiddenSecret(); // Flag hidden
    
    return 0;
}
